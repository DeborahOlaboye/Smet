import { buildModule } from \"@nomicfoundation/hardhat-ignition/modules\";\nimport fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Load IPFS metadata results if available\nlet ipfsResults = {};\ntry {\n  const resultsPath = path.join(__dirname, '../ipfs-metadata-results.json');\n  if (fs.existsSync(resultsPath)) {\n    ipfsResults = JSON.parse(fs.readFileSync(resultsPath, 'utf8'));\n  }\n} catch (error) {\n  console.log('No IPFS results found, using placeholder URIs');\n}\n\n// Default IPFS base URIs (will be updated after metadata upload)\nconst HERO_BASE_URI = process.env.HERO_IPFS_BASE_URI || \"ipfs://QmPlaceholderHeroes/\";\nconst LOOT_BASE_URI = process.env.LOOT_IPFS_BASE_URI || \"ipfs://QmPlaceholderLoot/\";\n\nconst SmetRewardModule = buildModule(\"SmetRewardModule\", (m) => {\n  // Deploy ERC20 token\n  const smetGold = m.contract(\"SmetGold\", []);\n\n  // Deploy ERC721 with IPFS base URI\n  const smetHero = m.contract(\"SmetHero\", [HERO_BASE_URI]);\n\n  // Deploy ERC1155 with IPFS base URI\n  const smetLoot = m.contract(\"SmetLoot\", [LOOT_BASE_URI]);\n\n  // Deploy reward contract\n  const smetReward = m.contract(\"SmetReward\", [\n    smetGold,\n    smetHero,\n    smetLoot,\n  ]);\n\n  return {\n    smetGold,\n    smetHero,\n    smetLoot,\n    smetReward,\n  };\n});\n\nexport default SmetRewardModule;