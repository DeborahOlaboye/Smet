import { PinataSDK } from \"pinata-web3\";\nimport fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst pinata = new PinataSDK({\n  pinataJwt: process.env.PINATA_JWT,\n  pinataGateway: process.env.PINATA_GATEWAY\n});\n\nasync function uploadMetadataToIPFS() {\n  try {\n    console.log('ðŸš€ Starting NFT metadata upload to IPFS...');\n    \n    const metadataDir = path.join(__dirname, '../metadata');\n    const heroesDir = path.join(metadataDir, 'heroes');\n    const lootDir = path.join(metadataDir, 'loot');\n    \n    const results = {\n      heroes: {},\n      loot: {}\n    };\n\n    // Upload hero metadata\n    console.log('ðŸ“¦ Uploading hero metadata...');\n    const heroFiles = fs.readdirSync(heroesDir);\n    \n    for (const file of heroFiles) {\n      if (file.endsWith('.json')) {\n        const filePath = path.join(heroesDir, file);\n        const metadata = JSON.parse(fs.readFileSync(filePath, 'utf8'));\n        \n        const upload = await pinata.upload.json(metadata, {\n          metadata: {\n            name: `Hero-${file}`,\n            keyvalues: {\n              type: 'hero-metadata',\n              tokenId: file.replace('.json', '')\n            }\n          }\n        });\n        \n        const tokenId = file.replace('.json', '');\n        results.heroes[tokenId] = {\n          ipfsHash: upload.IpfsHash,\n          uri: `ipfs://${upload.IpfsHash}`,\n          gatewayUrl: `https://gateway.pinata.cloud/ipfs/${upload.IpfsHash}`\n        };\n        \n        console.log(`âœ… Hero #${tokenId}: ${upload.IpfsHash}`);\n      }\n    }\n\n    // Upload loot metadata\n    console.log('ðŸ“¦ Uploading loot metadata...');\n    const lootFiles = fs.readdirSync(lootDir);\n    \n    for (const file of lootFiles) {\n      if (file.endsWith('.json')) {\n        const filePath = path.join(lootDir, file);\n        const metadata = JSON.parse(fs.readFileSync(filePath, 'utf8'));\n        \n        const upload = await pinata.upload.json(metadata, {\n          metadata: {\n            name: `Loot-${file}`,\n            keyvalues: {\n              type: 'loot-metadata',\n              tokenId: file.replace('.json', '')\n            }\n          }\n        });\n        \n        const tokenId = file.replace('.json', '');\n        results.loot[tokenId] = {\n          ipfsHash: upload.IpfsHash,\n          uri: `ipfs://${upload.IpfsHash}`,\n          gatewayUrl: `https://gateway.pinata.cloud/ipfs/${upload.IpfsHash}`\n        };\n        \n        console.log(`âœ… Loot #${tokenId}: ${upload.IpfsHash}`);\n      }\n    }\n\n    // Save results to file\n    const resultsPath = path.join(__dirname, '../ipfs-metadata-results.json');\n    fs.writeFileSync(resultsPath, JSON.stringify(results, null, 2));\n    \n    console.log('ðŸŽ‰ All metadata uploaded successfully!');\n    console.log(`ðŸ“„ Results saved to: ${resultsPath}`);\n    \n    return results;\n    \n  } catch (error) {\n    console.error('âŒ Error uploading metadata:', error);\n    throw error;\n  }\n}\n\nif (import.meta.url === `file://${process.argv[1]}`) {\n  uploadMetadataToIPFS()\n    .then(() => process.exit(0))\n    .catch(() => process.exit(1));\n}\n\nexport { uploadMetadataToIPFS };